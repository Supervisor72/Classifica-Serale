<!DOCTYPE html>
<html lang="it">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Classifica Vendite PDV</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  margin: 2rem;
Â  Â  Â  background: #f8f9fa;
Â  Â  }
Â  Â  h1 {
Â  Â  Â  text-align: center;
Â  Â  Â  color: #333;
Â  Â  }
Â  Â  table {
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  margin-top: 2rem;
Â  Â  }
Â  Â  th, td {
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  padding: 10px;
Â  Â  Â  text-align: left;
Â  Â  }
Â  Â  th {
Â  Â  Â  background-color: #007bff;
Â  Â  Â  color: white;
Â  Â  }
Â  Â  td input {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 12px;
Â  Â  Â  font-size: 1.2em;
Â  Â  }
Â  Â  td.pdv {
Â  Â  Â  width: 30%;
Â  Â  Â  font-weight: bold;
Â  Â  }
Â  Â  button {
Â  Â  Â  padding: 10px 20px;
Â  Â  Â  margin: 10px 5px;
Â  Â  Â  font-size: 1em;
Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â  #output {
Â  Â  Â  margin-top: 2rem;
Â  Â  Â  white-space: pre-wrap;
Â  Â  Â  background: #fff;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  padding: 1rem;
Â  Â  }
Â  </style>
</head>
<body>
Â  <h1>Classifica Vendite Punti Vendita</h1>

Â  <table id="venditeTable">
Â  Â  <thead>
Â  Â  Â  <tr>
Â  Â  Â  Â  <th>Punto Vendita</th>
Â  Â  Â  Â  <th>Valore (â‚¬)</th>
Â  Â  Â  </tr>
Â  Â  </thead>
Â  Â  <tbody id="tableBody">
Â  Â  </tbody>
Â  </table>

Â  <div>
Â  Â  <button onclick="resetTable()">ðŸ”„ Reset</button>
Â  Â  <button onclick="ordinaVendite()">ðŸ“Š Ordina</button>
Â  Â  <button onclick="generaMessaggio()">ðŸ“¨ Messaggio Telegram</button>
Â  Â  <button onclick="generaMessaggioWhatsapp()">ðŸ“± Messaggio WhatsApp</button>
Â  </div>

Â  <div id="output"></div>

Â  <script>
Â  Â  const puntiVendita = [
Â  Â  Â  "AQUILA", "AVEZZANO", "BOLOGNA", "CARPI", "CDC", "CESENA", "CHIOGGIA", "CIVITANOVA", "CONEGLIANO", "FABRIANO",
Â  Â  Â  "FAENZA", "FANO", "FOLIGNO", "FORLI", "IMOLA", "LANCIANO", "MACERATA", "MARANELLO", "MONSANO", "OSIMO",
Â  Â  Â  "PADOVA", "PESCARA", "PESARO", "REGGIO", "RIETI", "RIMINI", "RSM", "SALA", "SBT" , "TERMOLI",
Â  Â  Â  "TERAMO", "VASTO", "VICENZA", "VITERBO"
Â  Â  ].sort();

Â  Â  const tbody = document.getElementById('tableBody');
Â  Â  puntiVendita.forEach(pdv => {
Â  Â  Â  const row = document.createElement('tr');
Â  Â  Â  row.innerHTML = `
Â  Â  Â  Â  <td class="pdv">${pdv}</td>
Â  Â  Â  Â  <td><input type="number" placeholder="Inserisci venduto"></td>
Â  Â  Â  `;
Â  Â  Â  tbody.appendChild(row);
Â  Â  });

Â  Â  function resetTable() {
Â  Â  Â  document.querySelectorAll('input').forEach(input => input.value = '');
Â  Â  Â  document.getElementById('output').textContent = '';
Â  Â  }

Â  Â  function ordinaVendite() {
Â  Â  Â  const rows = Array.from(tbody.querySelectorAll('tr'));
Â  Â  Â  rows.sort((a, b) => {
Â  Â  Â  Â  const valA = parseFloat(a.cells[1].querySelector('input').value) || 0;
Â  Â  Â  Â  const valB = parseFloat(b.cells[1].querySelector('input').value) || 0;
Â  Â  Â  Â  return valB - valA;
Â  Â  Â  });
Â  Â  Â  rows.forEach(row => tbody.appendChild(row));
Â  Â  }

Â  Â  function generaMessaggio() {
Â  Â  Â  const rows = Array.from(tbody.querySelectorAll('tr'));
Â  Â  Â  const dati = rows.map(row => {
Â  Â  Â  Â  const pdv = row.cells[0].textContent.trim();
Â  Â  Â  Â  const val = parseFloat(row.cells[1].querySelector('input').value) || 0;
Â  Â  Â  Â  return { pdv, val };
Â  Â  Â  }).sort((a, b) => b.val - a.val);

Â  Â  Â  let messaggio = "ðŸ† *CLASSIFICA FINALE* ðŸ†\n\n";
Â  Â  Â  dati.forEach((item, i) => {
Â  Â  Â  Â  messaggio += `${i + 1}. ${item.pdv.padEnd(12)}: â‚¬ ${item.val.toLocaleString().padStart(10)}\n`;
Â  Â  Â  });

Â  Â  Â  document.getElementById('output').textContent = messaggio;

Â  Â  Â  // Codifica il messaggio per il link Telegram
Â  Â  Â  const encodedMessage = encodeURIComponent(messaggio);
Â  Â  Â  const telegramLink = `tg://msg_url?url=${encodedMessage}`;

Â  Â  Â  // Apri l'app Telegram
Â  Â  Â  window.location.href = telegramLink;
Â  Â  }

Â  Â  function generaMessaggioWhatsapp() {
Â  Â  Â  const rows = Array.from(tbody.querySelectorAll('tr'));
Â  Â  Â  const dati = rows.map(row => {
Â  Â  Â  Â  const pdv = row.cells[0].textContent.trim();
Â  Â  Â  Â  const val = parseFloat(row.cells[1].querySelector('input').value) || 0;
Â  Â  Â  Â  return { pdv, val };
Â  Â  Â  }).sort((a, b) => b.val - a.val);

Â  Â  Â  let messaggio = "ðŸ† *CLASSIFICA SERALE* ðŸ†\n\n";
Â  Â  Â  dati.forEach((item, i) => {
Â  Â  Â  Â  messaggio += `${i + 1}. ${item.pdv.padEnd(12)}: â‚¬ ${item.val.toLocaleString().padStart(10)}\n`;
Â  Â  Â  });

Â  Â  Â  document.getElementById('output').textContent = messaggio;

Â  Â  Â  // Codifica il messaggio per il link WhatsApp
Â  Â  Â  const encodedMessage = encodeURIComponent(messaggio);
Â  Â  Â  const whatsappLink = `https://wa.me/?text=${encodedMessage}`;

Â  Â  Â  // Apri l'app WhatsApp
Â  Â  Â  window.location.href = whatsappLink;
Â  Â  }
Â  </script>
</body>
</html>
